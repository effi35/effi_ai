<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="תצוגה מקדימה - מאחד קוד חכם Pro 2.0">
    <meta name="theme-color" content="#3498db">
    <title>מאחד קוד חכם Pro 2.0 - תצוגה מקדימה</title>
    
    <!-- PWA תמיכה -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="../assets/images/app-icon-192.png">
    
    <!-- ספריות חיצוניות -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/vis-network.min.css">
    
    <!-- סגנונות פנימיים -->
    <link rel="stylesheet" href="../assets/css/style.css">
    
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary-color), #2980b9);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            box-shadow: var(--box-shadow);
        }
        
        .card {
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            margin-bottom: 20px;
            border: none;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .card-header {
            background: var(--dark-color);
            color: white;
            border-radius: var(--border-radius) var(--border-radius) 0 0 !important;
            font-weight: bold;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-success {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
        }
        
        .btn {
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .nav-tabs .nav-link {
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            padding: 10px 15px;
        }
        
        .nav-tabs .nav-link.active {
            background-color: var(--light-color);
            color: var(--dark-color);
            font-weight: bold;
        }
        
        #graph-container {
            height: 500px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
        }
        
        .file-tree {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .file-tree ul {
            list-style-type: none;
            padding-right: 20px;
        }
        
        .file-tree li {
            margin: 5px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-right-color: var(--primary-color);
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .highlight-box {
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            padding: 15px;
            background-color: rgba(52, 152, 219, 0.1);
            margin-bottom: 15px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            margin-right: 10px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .badge-running {
            background-color: var(--primary-color);
            color: white;
        }
        
        .badge-success {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .badge-error {
            background-color: var(--danger-color);
            color: white;
        }
        
        .result-item {
            border-right: 3px solid var(--primary-color);
            padding: 10px;
            margin-bottom: 5px;
            background-color: #f8f9fa;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }
        
        .tooltip-inner {
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <!-- כותרת -->
        <header class="header text-center">
            <div class="d-flex justify-content-between align-items-center">
                <h1>
                    <i class="fas fa-code-branch me-2"></i>
                    מאחד קוד חכם Pro 2.0
                </h1>
                <div>
                    <span class="badge bg-info">גרסה 2.0.0</span>
                    <span class="badge bg-success">Effi-AI-privet</span>
                </div>
            </div>
            <p class="lead mt-2">ניתוח, זיהוי ואיחוד קוד חכם בעזרת טכנולוגיות AI מתקדמות</p>
        </header>
        
        <!-- תפריט ניווט -->
        <ul class="nav nav-tabs mb-4" id="mainTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="analyzer-tab" data-bs-toggle="tab" data-bs-target="#analyzer" type="button" role="tab" aria-controls="analyzer" aria-selected="true">
                    <i class="fas fa-search me-1"></i> ניתוח קבצים
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="graph-tab" data-bs-toggle="tab" data-bs-target="#graph" type="button" role="tab" aria-controls="graph" aria-selected="false">
                    <i class="fas fa-project-diagram me-1"></i> גרף קשרים
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="merge-tab" data-bs-toggle="tab" data-bs-target="#merge" type="button" role="tab" aria-controls="merge" aria-selected="false">
                    <i class="fas fa-object-group me-1"></i> איחוד קוד
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab" aria-controls="security" aria-selected="false">
                    <i class="fas fa-shield-alt me-1"></i> בדיקות אבטחה
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">
                    <i class="fas fa-cog me-1"></i> הגדרות
                </button>
            </li>
        </ul>
        
        <!-- תוכן הלשוניות -->
        <div class="tab-content" id="mainTabContent">
            <!-- לשונית ניתוח קבצים -->
            <div class="tab-pane fade show active" id="analyzer" role="tabpanel" aria-labelledby="analyzer-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-folder-open me-1"></i> בחירת קבצים
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="project-path" class="form-label">נתיב פרויקט</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="project-path" placeholder="/path/to/project">
                                        <button class="btn btn-primary" type="button" id="browse-btn">
                                            <i class="fas fa-folder-open"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">או העלאת קבצים</label>
                                    <input class="form-control" type="file" id="file-upload" multiple>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">סינון קבצים</label>
                                    <select class="form-select" id="language-filter">
                                        <option value="all">כל השפות</option>
                                        <option value="python">Python</option>
                                        <option value="javascript">JavaScript</option>
                                        <option value="typescript">TypeScript</option>
                                        <option value="java">Java</option>
                                        <option value="cpp">C/C++</option>
                                        <option value="csharp">C#</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-primary w-100" id="analyze-btn">
                                    <i class="fas fa-search me-1"></i> ניתוח
                                </button>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-list me-1"></i> קבצים לניתוח
                            </div>
                            <div class="card-body p-0">
                                <div class="file-tree p-3">
                                    <ul id="file-list">
                                        <li>
                                            <i class="fas fa-file-code text-primary"></i>
                                            <span>file_analyzer.py</span>
                                        </li>
                                        <li>
                                            <i class="fas fa-file-code text-primary"></i>
                                            <span>relationship_graph.py</span>
                                        </li>
                                        <li>
                                            <i class="fas fa-file-code text-success"></i>
                                            <span>module.py</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">נבחרו 3 קבצים</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i> תוצאות ניתוח
                            </div>
                            <div class="card-body">
                                <div class="highlight-box mb-4">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">סיכום ניתוח</h5>
                                        <span class="status-badge badge-success">הושלם</span>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>3</h3>
                                                <p>קבצים שנותחו</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>1,520</h3>
                                                <p>שורות קוד</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>21</h3>
                                                <p>קשרים שזוהו</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <ul class="nav nav-tabs" id="analyzerResultsTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats" type="button" role="tab" aria-controls="stats" aria-selected="true">סטטיסטיקות</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="complexity-tab" data-bs-toggle="tab" data-bs-target="#complexity" type="button" role="tab" aria-controls="complexity" aria-selected="false">מורכבות</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="dependencies-tab" data-bs-toggle="tab" data-bs-target="#dependencies" type="button" role="tab" aria-controls="dependencies" aria-selected="false">תלויות</button>
                                    </li>
                                </ul>
                                
                                <div class="tab-content p-3 border border-top-0 rounded-bottom" id="analyzerResultsTabContent">
                                    <div class="tab-pane fade show active" id="stats" role="tabpanel" aria-labelledby="stats-tab">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h5>התפלגות שפות</h5>
                                                <canvas id="languages-chart" height="200"></canvas>
                                            </div>
                                            <div class="col-md-6">
                                                <h5>סטטיסטיקות שורות</h5>
                                                <canvas id="lines-chart" height="200"></canvas>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5>פרטי קבצים</h5>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>שם קובץ</th>
                                                        <th>שפה</th>
                                                        <th>שורות קוד</th>
                                                        <th>גודל (KB)</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>file_analyzer.py</td>
                                                        <td>Python</td>
                                                        <td>820</td>
                                                        <td>32.5</td>
                                                    </tr>
                                                    <tr>
                                                        <td>relationship_graph.py</td>
                                                        <td>Python</td>
                                                        <td>650</td>
                                                        <td>28.1</td>
                                                    </tr>
                                                    <tr>
                                                        <td>module.py</td>
                                                        <td>Python</td>
                                                        <td>50</td>
                                                        <td>2.3</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    
                                    <div class="tab-pane fade" id="complexity" role="tabpanel" aria-labelledby="complexity-tab">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h5>מורכבות ציקלומטית</h5>
                                                <canvas id="complexity-chart" height="200"></canvas>
                                            </div>
                                            <div class="col-md-6">
                                                <h5>עומק קינון</h5>
                                                <canvas id="nesting-chart" height="200"></canvas>
                                            </div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5>פירוט מורכבות לפי קובץ</h5>
                                            <div class="result-item">
                                                <h6>file_analyzer.py</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">מורכבות: 70%</div>
                                                </div>
                                                <p>מורכבות ציקלומטית ממוצעת: 5.2</p>
                                                <p>עומק קינון מקסימלי: 4</p>
                                            </div>
                                            
                                            <div class="result-item">
                                                <h6>relationship_graph.py</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-info" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100">מורכבות: 55%</div>
                                                </div>
                                                <p>מורכבות ציקלומטית ממוצעת: 4.3</p>
                                                <p>עומק קינון מקסימלי: 3</p>
                                            </div>
                                            
                                            <div class="result-item">
                                                <h6>module.py</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">מורכבות: 25%</div>
                                                </div>
                                                <p>מורכבות ציקלומטית ממוצעת: 2.1</p>
                                                <p>עומק קינון מקסימלי: 2</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="tab-pane fade" id="dependencies" role="tabpanel" aria-labelledby="dependencies-tab">
                                        <div class="mb-4">
                                            <h5>תרשים תלויות</h5>
                                            <div id="dependencies-chart" style="height: 300px;"></div>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h5>יבוא מודולים</h5>
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>קובץ</th>
                                                        <th>מודולים מיובאים</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>file_analyzer.py</td>
                                                        <td>
                                                            <span class="badge bg-secondary me-1">os</span>
                                                            <span class="badge bg-secondary me-1">re</span>
                                                            <span class="badge bg-secondary me-1">json</span>
                                                            <span class="badge bg-secondary me-1">ast</span>
                                                            <span class="badge bg-secondary me-1">logging</span>
                                                            <span class="badge bg-secondary me-1">networkx</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>relationship_graph.py</td>
                                                        <td>
                                                            <span class="badge bg-secondary me-1">os</span>
                                                            <span class="badge bg-secondary me-1">json</span>
                                                            <span class="badge bg-secondary me-1">logging</span>
                                                            <span class="badge bg-secondary me-1">networkx</span>
                                                            <span class="badge bg-secondary me-1">matplotlib</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>module.py</td>
                                                        <td>
                                                            <span class="badge bg-secondary me-1">file_analyzer</span>
                                                            <span class="badge bg-secondary me-1">relationship_graph</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- לשונית גרף קשרים -->
            <div class="tab-pane fade" id="graph" role="tabpanel" aria-labelledby="graph-tab">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-sliders-h me-1"></i> הגדרות גרף
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">אלגוריתם פריסה</label>
                                    <select class="form-select" id="layout-algorithm">
                                        <option value="force">Force-Directed</option>
                                        <option value="circular">Circular</option>
                                        <option value="hierarchical">Hierarchical</option>
                                        <option value="community">Community</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">סכמת צבעים</label>
                                    <select class="form-select" id="color-scheme">
                                        <option value="language">לפי שפה</option>
                                        <option value="type">לפי סוג</option>
                                        <option value="module">לפי מודול</option>
                                        <option value="centrality">לפי מרכזיות</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">סינון קודקודים</label>
                                    <select class="form-select" id="node-filter">
                                        <option value="all">הכל</option>
                                        <option value="files">קבצים בלבד</option>
                                        <option value="classes">מחלקות בלבד</option>
                                        <option value="functions">פונקציות בלבד</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">משקל קשת מינימלי</label>
                                    <input type="range" class="form-range" id="min-edge-weight" min="1" max="10" value="1">
                                    <div class="d-flex justify-content-between">
                                        <small>1</small>
                                        <small>10</small>
                                    </div>
                                </div>
                                
                                <button class="btn btn-primary w-100" id="update-graph-btn">
                                    <i class="fas fa-sync-alt me-1"></i> עדכון גרף
                                </button>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-info-circle me-1"></i> מידע על גרף הקשרים
                            </div>
                            <div class="card-body">
                                <div class="mb-2">
                                    <strong>קודקודים:</strong> <span id="node-count-info">54</span>
                                </div>
                                <div class="mb-2">
                                    <strong>קשתות:</strong> <span id="edge-count-info">87</span>
                                </div>
                                <div class="mb-2">
                                    <strong>צפיפות:</strong> <span id="density-info">0.32</span>
                                </div>
                                <div class="mb-2">
                                    <strong>קודקוד מרכזי:</strong> <span id="central-node-info">module.py</span>
                                </div>
                                <div class="mb-2">
                                    <strong>קהילות:</strong> <span id="community-count-info">3</span>
                                </div>
                                <div>
                                    <strong>מעגלי תלויות:</strong> <span id="cycles-count-info">2</span> <a href="#" data-bs-toggle="tooltip" title="מעגלי תלויות עלולים להוביל לבעיות בקוד"><i class="fas fa-question-circle text-info"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-9">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-project-diagram me-1"></i> גרף קשרים</span>
                                <div>
                                    <button class="btn btn-sm btn-outline-primary me-1" id="zoom-in-btn">
                                        <i class="fas fa-search-plus"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary me-1" id="zoom-out-btn">
                                        <i class="fas fa-search-minus"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary me-1" id="fit-btn">
                                        <i class="fas fa-expand-arrows-alt"></i>
                                    </button>
                                    <div class="btn-group">
                                        <button class="btn btn-sm btn-outline-secondary" id="export-png-btn">
                                            <i class="fas fa-file-image me-1"></i> PNG
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary" id="export-svg-btn">
                                            <i class="fas fa-file-code me-1"></i> SVG
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div id="graph-container"></div>
                            </div>
                            <div class="card-footer">
                                <small>לחץ על קודקוד לקבלת מידע נוסף</small>
                            </div>
                        </div>
                        
                        <div class="card mt-3 fade-in" id="selected-node-info-card" style="display: none;">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="fas fa-info-circle me-1"></i> מידע על הקודקוד הנבחר</span>
                                <button type="button" class="btn-close" aria-label="Close" id="close-node-info"></button>
                            </div>
                            <div class="card-body">
                                <h5 id="selected-node-name">file_analyzer.py</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <strong>סוג:</strong> <span id="selected-node-type">קובץ</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>שפה:</strong> <span id="selected-node-language">Python</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>גודל:</strong> <span id="selected-node-size">32.5 KB</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>שורות קוד:</strong> <span id="selected-node-lines">820</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <strong>קשרים נכנסים:</strong> <span id="selected-node-in-degree">5</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>קשרים יוצאים:</strong> <span id="selected-node-out-degree">12</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>מרכזיות:</strong> <span id="selected-node-centrality">0.78</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>קהילה:</strong> <span id="selected-node-community">1</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <h6>תלויות</h6>
                                    <ul class="nav nav-tabs" id="dependenciesTab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="imports-tab" data-bs-toggle="tab" data-bs-target="#imports" type="button" role="tab" aria-controls="imports" aria-selected="true">יבוא</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="imported-by-tab" data-bs-toggle="tab" data-bs-target="#imported-by" type="button" role="tab" aria-controls="imported-by" aria-selected="false">מיובא על-ידי</button>
                                        </li>
                                    </ul>
                                    <div class="tab-content p-2 border border-top-0 rounded-bottom" id="dependenciesTabContent">
                                        <div class="tab-pane fade show active" id="imports" role="tabpanel" aria-labelledby="imports-tab">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">os</li>
                                                <li class="list-group-item">re</li>
                                                <li class="list-group-item">json</li>
                                                <li class="list-group-item">ast</li>
                                                <li class="list-group-item">logging</li>
                                                <li class="list-group-item">networkx</li>
                                            </ul>
                                        </div>
                                        <div class="tab-pane fade" id="imported-by" role="tabpanel" aria-labelledby="imported-by-tab">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item">module.py</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- לשונית איחוד קוד -->
            <div class="tab-pane fade" id="merge" role="tabpanel" aria-labelledby="merge-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-code me-1"></i> קבצי מקור
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">קובץ מקור 1</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="source-file-1" placeholder="/path/to/file1.py">
                                        <button class="btn btn-outline-secondary" type="button" id="browse-file-1-btn">
                                            <i class="fas fa-file-code"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">קובץ מקור 2</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="source-file-2" placeholder="/path/to/file2.py">
                                        <button class="btn btn-outline-secondary" type="button" id="browse-file-2-btn">
                                            <i class="fas fa-file-code"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <div class="mb-3">
                                    <label class="form-label">קובץ תוצאה</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="output-file" placeholder="/path/to/output.py">
                                        <button class="btn btn-outline-secondary" type="button" id="browse-output-btn">
                                            <i class="fas fa-file-export"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <div class="mb-3">
                                    <label class="form-label">אסטרטגיית מיזוג</label>
                                    <select class="form-select" id="merge-strategy">
                                        <option value="smart">מיזוג חכם (AI)</option>
                                        <option value="keep-left">העדפת קובץ ראשון</option>
                                        <option value="keep-right">העדפת קובץ שני</option>
                                        <option value="both">שמירה על שניהם</option>
                                    </select>
                                </div>
                                
                                <button class="btn btn-primary w-100" id="merge-btn">
                                    <i class="fas fa-object-group me-1"></i> מיזוג קבצים
                                </button>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-tasks me-1"></i> תהליך המיזוג
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <span class="status-badge badge-running" id="merge-status">בתהליך</span>
                                    <div class="spinner me-2" id="merge-spinner"></div>
                                </div>
                                
                                <div class="progress mb-3">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                                </div>
                                
                                <div class="mb-2">
                                    <strong>שלב נוכחי:</strong> <span id="current-step">פתרון קונפליקטים</span>
                                </div>
                                
                                <div class="mb-2">
                                    <strong>זמן שחלף:</strong> <span id="elapsed-time">00:01:23</span>
                                </div>
                                
                                <div>
                                    <strong>שינויים:</strong> <span id="changes-count">15</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-code-branch me-1"></i> תצוגת מיזוג
                            </div>
                            <div class="card-body p-0">
                                <div class="d-flex">
                                    <div style="flex: 1; padding: 10px; max-height: 600px; overflow: auto;">
                                        <h6 class="text-center">מקור 1</h6>
                                        <pre><code class="language-python" id="source-1-code">class FileAnalyzer:
    """
    A class for analyzing code files
    """
    
    def __init__(self, config=None):
        """Initialize the analyzer"""
        self.config = config or {}
        self.cache = {}
    
    def analyze_file(self, file_path):
        """Analyze a single file"""
        # Check if file exists
        if not os.path.exists(file_path):
            return {"error": "File not found"}
            
        # Get file info
        file_info = {
            "path": file_path,
            "size": os.path.getsize(file_path),
            "extension": os.path.splitext(file_path)[1]
        }
        
        return file_info</code></pre>
                                    </div>
                                    <div style="flex: 1; padding: 10px; max-height: 600px; overflow: auto;">
                                        <h6 class="text-center">מקור 2</h6>
                                        <pre><code class="language-python" id="source-2-code">class FileAnalyzer:
    """
    Advanced file analyzer for code analysis
    """
    
    def __init__(self, config=None):
        """Initialize the analyzer with configuration"""
        self.config = config or {}
        self.cache = {}
        self.logger = logging.getLogger(__name__)
    
    def analyze_file(self, file_path):
        """Perform detailed analysis of a file"""
        # Check if file exists
        if not os.path.exists(file_path):
            self.logger.error(f"File not found: {file_path}")
            return {"error": "File not found"}
            
        # Get file info
        file_info = {
            "path": file_path,
            "size": os.path.getsize(file_path),
            "extension": os.path.splitext(file_path)[1],
            "modified": os.path.getmtime(file_path)
        }
        
        # Detect language
        language = self._detect_language(file_path)
        file_info["language"] = language
        
        return file_info
        
    def _detect_language(self, file_path):
        """Detect programming language of the file"""
        ext = os.path.splitext(file_path)[1].lower()
        
        if ext == ".py":
            return "python"
        elif ext in [".js", ".jsx"]:
            return "javascript"
        elif ext in [".ts", ".tsx"]:
            return "typescript"
        else:
            return "unknown"</code></pre>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <div style="padding: 10px; max-height: 600px; overflow: auto;">
                                    <h6 class="text-center">תוצאת המיזוג</h6>
                                    <pre><code class="language-python" id="merged-code">class FileAnalyzer:
    """
    Advanced file analyzer for code analysis
    """
    
    def __init__(self, config=None):
        """Initialize the analyzer with configuration"""
        self.config = config or {}
        self.cache = {}
        self.logger = logging.getLogger(__name__)
    
    def analyze_file(self, file_path):
        """Perform detailed analysis of a file"""
        # Check if file exists
        if not os.path.exists(file_path):
            self.logger.error(f"File not found: {file_path}")
            return {"error": "File not found"}
            
        # Get file info
        file_info = {
            "path": file_path,
            "size": os.path.getsize(file_path),
            "extension": os.path.splitext(file_path)[1],
            "modified": os.path.getmtime(file_path)
        }
        
        # Detect language
        language = self._detect_language(file_path)
        file_info["language"] = language
        
        return file_info
        
    def _detect_language(self, file_path):
        """Detect programming language of the file"""
        ext = os.path.splitext(file_path)[1].lower()
        
        if ext == ".py":
            return "python"
        elif ext in [".js", ".jsx"]:
            return "javascript"
        elif ext in [".ts", ".tsx"]:
            return "typescript"
        else:
            return "unknown"</code></pre>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <span class="badge bg-success me-2">נוסף: 12 שורות</span>
                                        <span class="badge bg-danger me-2">הוסר: 0 שורות</span>
                                        <span class="badge bg-warning">שונה: 3 שורות</span>
                                    </div>
                                    <button class="btn btn-sm btn-primary" id="save-merge-btn">
                                        <i class="fas fa-save me-1"></i> שמירת התוצאה
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- לשונית בדיקות אבטחה -->
            <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
                <div class="row">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-shield-alt me-1"></i> הגדרות סריקת אבטחה
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">נתיב לסריקה</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="security-path" placeholder="/path/to/project">
                                        <button class="btn btn-outline-secondary" type="button" id="browse-security-btn">
                                            <i class="fas fa-folder-open"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">רמת חומרה מינימלית</label>
                                    <select class="form-select" id="severity-level">
                                        <option value="low">נמוכה</option>
                                        <option value="medium" selected>בינונית</option>
                                        <option value="high">גבוהה</option>
                                        <option value="critical">קריטית</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">סוגי בדיקות</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="check-dependencies" checked>
                                        <label class="form-check-label" for="check-dependencies">
                                            תלויות פגיעות
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="check-code" checked>
                                        <label class="form-check-label" for="check-code">
                                            דפוסי קוד פגיעים
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="check-secrets" checked>
                                        <label class="form-check-label" for="check-secrets">
                                            סיסמאות וסודות בקוד
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="check-licenses">
                                        <label class="form-check-label" for="check-licenses">
                                            בעיות רישוי
                                        </label>
                                    </div>
                                </div>
                                
                                <button class="btn btn-primary w-100" id="scan-btn">
                                    <i class="fas fa-search me-1"></i> התחלת סריקה
                                </button>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-chart-pie me-1"></i> סיכום סריקה
                            </div>
                            <div class="card-body">
                                <canvas id="security-summary-chart" height="200"></canvas>
                                
                                <div class="d-flex justify-content-between mt-3">
                                    <div class="text-center">
                                        <h4 class="text-danger">2</h4>
                                        <small>קריטיות</small>
                                    </div>
                                    <div class="text-center">
                                        <h4 class="text-warning">5</h4>
                                        <small>גבוהות</small>
                                    </div>
                                    <div class="text-center">
                                        <h4 class="text-info">8</h4>
                                        <small>בינוניות</small>
                                    </div>
                                    <div class="text-center">
                                        <h4 class="text-success">12</h4>
                                        <small>נמוכות</small>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <div class="mb-3">
                                    <label class="form-label">ייצוא דוח</label>
                                    <div class="d-flex">
                                        <button class="btn btn-sm btn-outline-primary me-2">
                                            <i class="fas fa-file-pdf me-1"></i> PDF
                                        </button>
                                        <button class="btn btn-sm btn-outline-primary me-2">
                                            <i class="fas fa-file-csv me-1"></i> CSV
                                        </button>
                                        <button class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-file-code me-1"></i> JSON
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-exclamation-triangle me-1"></i> ממצאי אבטחה
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>חומרה</th>
                                                <th>סוג</th>
                                                <th>תיאור</th>
                                                <th>קובץ</th>
                                                <th>שורה</th>
                                                <th>פעולות</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-danger">קריטי</span></td>
                                                <td>תלות פגיעה</td>
                                                <td>גרסת requests 2.25.0 פגיעה להתקפת XXE</td>
                                                <td>requirements.txt</td>
                                                <td>15</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="הצגת פרטים">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="תיקון אוטומטי">
                                                        <i class="fas fa-wrench"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-danger">קריטי</span></td>
                                                <td>סיסמה בקוד</td>
                                                <td>סיסמת API מוטבעת בקוד</td>
                                                <td>api_manager.py</td>
                                                <td>42</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="הצגת פרטים">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="תיקון אוטומטי">
                                                        <i class="fas fa-wrench"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-warning">גבוה</span></td>
                                                <td>קוד פגיע</td>
                                                <td>שימוש ב-eval() עם קלט משתמש</td>
                                                <td>code_runner.py</td>
                                                <td>78</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="הצגת פרטים">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="תיקון אוטומטי">
                                                        <i class="fas fa-wrench"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-warning">גבוה</span></td>
                                                <td>תלות פגיעה</td>
                                                <td>גרסת numpy 1.19.0 פגיעה לבעיית דליפת זיכרון</td>
                                                <td>requirements.txt</td>
                                                <td>8</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="הצגת פרטים">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="תיקון אוטומטי">
                                                        <i class="fas fa-wrench"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-info">בינוני</span></td>
                                                <td>קוד פגיע</td>
                                                <td>שימוש ב-os.path.join עם נתיבים יחסיים</td>
                                                <td>file_analyzer.py</td>
                                                <td>127</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="הצגת פרטים">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-success" data-bs-toggle="tooltip" title="תיקון אוטומטי">
                                                        <i class="fas fa-wrench"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>סה"כ:</strong> 27 ממצאים
                                    </div>
                                    <div>
                                        <button class="btn btn-sm btn-success me-2" id="fix-all-btn">
                                            <i class="fas fa-magic me-1"></i> תיקון אוטומטי הכל
                                        </button>
                                        <button class="btn btn-sm btn-primary" id="ignore-all-btn">
                                            <i class="fas fa-ban me-1"></i> התעלם מהכל
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-list-check me-1"></i> תוצאות תלויות
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>שם חבילה</th>
                                                <th>גרסה נוכחית</th>
                                                <th>גרסה מומלצת</th>
                                                <th>סטטוס</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>requests</td>
                                                <td>2.25.0</td>
                                                <td>2.27.1</td>
                                                <td><span class="badge bg-danger">פגיע</span></td>
                                            </tr>
                                            <tr>
                                                <td>numpy</td>
                                                <td>1.19.0</td>
                                                <td>1.21.5</td>
                                                <td><span class="badge bg-warning">פגיע</span></td>
                                            </tr>
                                            <tr>
                                                <td>matplotlib</td>
                                                <td>3.5.1</td>
                                                <td>3.5.1</td>
                                                <td><span class="badge bg-success">עדכני</span></td>
                                            </tr>
                                            <tr>
                                                <td>networkx</td>
                                                <td>2.6.3</td>
                                                <td>2.6.3</td>
                                                <td><span class="badge bg-success">עדכני</span></td>
                                            </tr>
                                            <tr>
                                                <td>tensorflow</td>
                                                <td>2.7.0</td>
                                                <td>2.8.0</td>
                                                <td><span class="badge bg-info">ניתן לעדכן</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="mt-3">
                                    <button class="btn btn-success" id="update-all-deps-btn">
                                        <i class="fas fa-arrow-up me-1"></i> עדכון כל החבילות
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- לשונית הגדרות -->
            <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-cogs me-1"></i> הגדרות כלליות
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">שפת ממשק</label>
                                    <select class="form-select" id="ui-language">
                                        <option value="he" selected>עברית</option>
                                        <option value="en">English</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">נושא</label>
                                    <select class="form-select" id="ui-theme">
                                        <option value="light" selected>בהיר</option>
                                        <option value="dark">כהה</option>
                                        <option value="auto">אוטומטי</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">תיקיית עבודה ברירת מחדל</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="default-workspace" placeholder="/path/to/workspace">
                                        <button class="btn btn-outline-secondary" type="button" id="browse-workspace-btn">
                                            <i class="fas fa-folder-open"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">מספר עובדים מקבילים</label>
                                    <input type="number" class="form-control" id="workers-count" min="1" max="32" value="4">
                                    <small class="form-text text-muted">מספר תהליכים מקבילים לניתוח קבצים</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">רמת לוג</label>
                                    <select class="form-select" id="log-level">
                                        <option value="error">שגיאות בלבד</option>
                                        <option value="warning">אזהרות ומעלה</option>
                                        <option value="info" selected>מידע ומעלה</option>
                                        <option value="debug">דיבאג (מפורט)</option>
                                    </select>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="enable-animations" checked>
                                    <label class="form-check-label" for="enable-animations">
                                        הפעלת אנימציות
                                    </label>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="auto-save" checked>
                                    <label class="form-check-label" for="auto-save">
                                        שמירה אוטומטית של תוצאות
                                    </label>
                                </div>
                                
                                <button class="btn btn-primary" id="save-settings-btn">
                                    <i class="fas fa-save me-1"></i> שמירת הגדרות
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <i class="fas fa-sliders-h me-1"></i> הגדרות ניתוח
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">גודל קובץ מקסימלי (MB)</label>
                                    <input type="number" class="form-control" id="max-file-size" min="1" max="1000" value="100">
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">סף מורכבות ציקלומטית</label>
                                    <input type="number" class="form-control" id="complexity-threshold" min="1" max="50" value="10">
                                    <small class="form-text text-muted">ערך שמעליו תוצג אזהרה על מורכבות גבוהה</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">שפות תכנות נתמכות</label>
                                    <select class="form-select" id="supported-languages" multiple size="6">
                                        <option value="python" selected>Python</option>
                                        <option value="javascript" selected>JavaScript</option>
                                        <option value="typescript" selected>TypeScript</option>
                                        <option value="java" selected>Java</option>
                                        <option value="cpp" selected>C/C++</option>
                                        <option value="csharp" selected>C#</option>
                                        <option value="go" selected>Go</option>
                                        <option value="ruby" selected>Ruby</option>
                                        <option value="php" selected>PHP</option>
                                        <option value="html" selected>HTML</option>
                                        <option value="css" selected>CSS</option>
                                        <option value="swift" selected>Swift</option>
                                        <option value="kotlin" selected>Kotlin</option>
                                        <option value="scala" selected>Scala</option>
                                        <option value="rust" selected>Rust</option>
                                        <option value="shell" selected>Shell</option>
                                    </select>
                                    <small class="form-text text-muted">החזק Ctrl לבחירה מרובה</small>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">אלגוריתם זיהוי קהילות</label>
                                    <select class="form-select" id="community-algorithm">
                                        <option value="louvain" selected>Louvain</option>
                                        <option value="girvan_newman">Girvan-Newman</option>
                                        <option value="label_propagation">Label Propagation</option>
                                        <option value="greedy_modularity">Greedy Modularity</option>
                                    </select>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="skip-binary-files" checked>
                                    <label class="form-check-label" for="skip-binary-files">
                                        דילוג על קבצים בינאריים
                                    </label>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="detect-license" checked>
                                    <label class="form-check-label" for="detect-license">
                                        זיהוי רישיונות בקוד
                                    </label>
                                </div>
                                
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" value="" id="use-ai-features" checked>
                                    <label class="form-check-label" for="use-ai-features">
                                        שימוש בתכונות AI מתקדמות
                                    </label>
                                </div>
                                
                                <button class="btn btn-primary" id="save-analysis-settings-btn">
                                    <i class="fas fa-save me-1"></i> שמירת הגדרות
                                </button>
                                <button class="btn btn-outline-secondary" id="reset-analysis-settings-btn">
                                    <i class="fas fa-undo me-1"></i> איפוס
                                </button>
                            </div>
                        </div>
                        
                        <div class="card mt-3">
                            <div class="card-header">
                                <i class="fas fa-info-circle me-1"></i> אודות
                            </div>
                            <div class="card-body">
                                <h5>מאחד קוד חכם Pro 2.0</h5>
                                <p>מודול מתקדם לניתוח, זיהוי ומיזוג של קבצי קוד</p>
                                <p><strong>גרסה:</strong> 2.0.0</p>
                                <p><strong>יוצר:</strong> Shay AI</p>
                                <p><strong>רישיון:</strong> MIT</p>
                                <p><small class="text-muted">נבנה עבור מערכת Effi-AI-privet</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- חלוניות מודליות -->
    <div class="modal fade" id="file-details-modal" tabindex="-1" aria-labelledby="file-details-modal-label" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="file-details-modal-label">פרטי קובץ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6>פרטים בסיסיים</h6>
                            <div class="mb-2">
                                <strong>שם:</strong> <span id="modal-filename">file_analyzer.py</span>
                            </div>
                            <div class="mb-2">
                                <strong>סוג:</strong> <span id="modal-filetype">Python</span>
                            </div>
                            <div class="mb-2">
                                <strong>גודל:</strong> <span id="modal-filesize">32.5 KB</span>
                            </div>
                            <div class="mb-2">
                                <strong>נתיב:</strong> <span id="modal-filepath">/path/to/module/core/file_analyzer.py</span>
                            </div>
                            <div class="mb-2">
                                <strong>תאריך שינוי:</strong> <span id="modal-modified">2023-09-15 14:30:22</span>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <ul class="nav nav-tabs" id="fileDetailsTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="structure-tab" data-bs-toggle="tab" data-bs-target="#structure" type="button" role="tab" aria-controls="structure" aria-selected="true">מבנה</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="metrics-tab" data-bs-toggle="tab" data-bs-target="#metrics" type="button" role="tab" aria-controls="metrics" aria-selected="false">מדדים</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="content-tab" data-bs-toggle="tab" data-bs-target="#content" type="button" role="tab" aria-controls="content" aria-selected="false">תוכן</button>
                                </li>
                            </ul>
                            <div class="tab-content p-2 border border-top-0 rounded-bottom" id="fileDetailsTabContent">
                                <div class="tab-pane fade show active" id="structure" role="tabpanel" aria-labelledby="structure-tab">
                                    <div class="file-tree">
                                        <ul>
                                            <li>
                                                <i class="fas fa-file-code text-primary"></i>
                                                <strong>file_analyzer.py</strong>
                                                <ul>
                                                    <li>
                                                        <i class="fas fa-cube text-warning"></i>
                                                        <strong>class FileAnalyzer</strong>
                                                        <ul>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                __init__(config)
                                                            </li>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                analyze_file(file_path)
                                                            </li>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                analyze_files(file_paths)
                                                            </li>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                calculate_project_statistics(file_paths)
                                                            </li>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                _detect_language(file_path)
                                                            </li>
                                                            <li>
                                                                <i class="fas fa-cog text-info"></i>
                                                                _detect_file_type(file_path)
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="metrics" role="tabpanel" aria-labelledby="metrics-tab">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-2">
                                                <strong>שורות קוד:</strong> 820
                                            </div>
                                            <div class="mb-2">
                                                <strong>שורות הערות:</strong> 150
                                            </div>
                                            <div class="mb-2">
                                                <strong>שורות ריקות:</strong> 130
                                            </div>
                                            <div class="mb-2">
                                                <strong>סה"כ שורות:</strong> 1,100
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-2">
                                                <strong>מחלקות:</strong> 1
                                            </div>
                                            <div class="mb-2">
                                                <strong>פונקציות:</strong> 12
                                            </div>
                                            <div class="mb-2">
                                                <strong>ייבואים:</strong> 9
                                            </div>
                                            <div class="mb-2">
                                                <strong>מורכבות ציקלומטית:</strong> 5.2
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="content" role="tabpanel" aria-labelledby="content-tab">
                                    <pre style="max-height: 300px; overflow: auto;"><code class="language-python">class FileAnalyzer:
    """
    מנתח מתקדם לקבצי קוד
    מאפשר ניתוח מעמיק של תוכן קבצי קוד, זיהוי מבנים, תלויות וקשרים בין קבצים
    """
    
    def __init__(self, config: Dict[str, Any] = None):
        """
        אתחול מנתח הקבצים
        
        Args:
            config: הגדרות קונפיגורציה אופציונליות
        """
        # הגדרות ברירת מחדל
        self.default_config = {
            "max_file_size_mb": 100,
            "skip_binary_files": True,
            "parallel_processing": True,
            "max_workers": os.cpu_count() or 4,
            "encoding_detection": True,
            "default_encoding": "utf-8",
            "detect_license": True
        }
        
        # עדכון הגדרות מהקונפיגורציה שסופקה
        self.config = self.default_config.copy()
        if config:
            self.config.update(config)
            
        # מטמון ניתוח הקוד
        self._analysis_cache = {}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">סגירה</button>
                    <button type="button" class="btn btn-primary">ניתוח מפורט</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ספריות JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/vis-network.min.js"></script>
    
    <!-- סקריפט פנימי -->
    <script src="../assets/js/app.js"></script>
    
    <script>
        // אתחול פונקציונליות
        document.addEventListener('DOMContentLoaded', function() {
            // אתחול הדגשת קוד
            document.querySelectorAll('pre code').forEach((el) => {
                hljs.highlightElement(el);
            });
            
            // אתחול tooltips
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl)
            });
            
            // אתחול גרף שפות
            var languagesCtx = document.getElementById('languages-chart').getContext('2d');
            var languagesChart = new Chart(languagesCtx, {
                type: 'pie',
                data: {
                    labels: ['Python', 'JavaScript', 'TypeScript'],
                    datasets: [{
                        data: [3, 0, 0],
                        backgroundColor: ['#3572A5', '#F7DF1E', '#007ACC']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // אתחול גרף שורות
            var linesCtx = document.getElementById('lines-chart').getContext('2d');
            var linesChart = new Chart(linesCtx, {
                type: 'bar',
                data: {
                    labels: ['file_analyzer.py', 'relationship_graph.py', 'module.py'],
                    datasets: [{
                        label: 'שורות קוד',
                        data: [820, 650, 50],
                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }, {
                        label: 'הערות',
                        data: [150, 120, 10],
                        backgroundColor: 'rgba(255, 206, 86, 0.5)',
                        borderColor: 'rgba(255, 206, 86, 1)',
                        borderWidth: 1
                    }, {
                        label: 'שורות ריקות',
                        data: [130, 100, 5],
                        backgroundColor: 'rgba(75, 192, 192, 0.5)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // אתחול גרף מורכבות
            var complexityCtx = document.getElementById('complexity-chart').getContext('2d');
            var complexityChart = new Chart(complexityCtx, {
                type: 'radar',
                data: {
                    labels: ['file_analyzer.py', 'relationship_graph.py', 'module.py'],
                    datasets: [{
                        label: 'מורכבות ציקלומטית',
                        data: [5.2, 4.3, 2.1],
                        fill: true,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgb(255, 99, 132)',
                        pointBackgroundColor: 'rgb(255, 99, 132)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(255, 99, 132)'
                    }]
                },
                options: {
                    elements: {
                        line: {
                            borderWidth: 3
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 10
                        }
                    }
                }
            });
            
            // אתחול גרף עומק קינון
            var nestingCtx = document.getElementById('nesting-chart').getContext('2d');
            var nestingChart = new Chart(nestingCtx, {
                type: 'radar',
                data: {
                    labels: ['file_analyzer.py', 'relationship_graph.py', 'module.py'],
                    datasets: [{
                        label: 'עומק קינון מקסימלי',
                        data: [4, 3, 2],
                        fill: true,
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointBackgroundColor: 'rgb(54, 162, 235)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(54, 162, 235)'
                    }]
                },
                options: {
                    elements: {
                        line: {
                            borderWidth: 3
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 5
                        }
                    }
                }
            });
            
            // אתחול גרף תלויות
            var nodes = new vis.DataSet([
                { id: 1, label: 'module.py', shape: 'box', color: { background: '#3572A5', border: '#2980b9' } },
                { id: 2, label: 'file_analyzer.py', shape: 'box', color: { background: '#3572A5', border: '#2980b9' } },
                { id: 3, label: 'relationship_graph.py', shape: 'box', color: { background: '#3572A5', border: '#2980b9' } }
            ]);

            var edges = new vis.DataSet([
                { from: 1, to: 2, arrows: 'to' },
                { from: 1, to: 3, arrows: 'to' },
                { from: 3, to: 2, arrows: 'to' }
            ]);

            var container = document.getElementById('dependencies-chart');
            var data = {
                nodes: nodes,
                edges: edges
            };
            var options = {
                nodes: {
                    shape: 'box',
                    borderWidth: 1,
                    shadow: true
                },
                edges: {
                    width: 1,
                    smooth: {
                        type: 'continuous'
                    }
                },
                physics: {
                    stabilization: false,
                    barnesHut: {
                        gravitationalConstant: -2000,
                        centralGravity: 0.3,
                        springLength: 95,
                        springConstant: 0.04
                    }
                }
            };
            var network = new vis.Network(container, data, options);
            
            // אתחול גרף אבטחה
            var securityCtx = document.getElementById('security-summary-chart').getContext('2d');
            var securityChart = new Chart(securityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['קריטי', 'גבוה', 'בינוני', 'נמוך'],
                    datasets: [{
                        data: [2, 5, 8, 12],
                        backgroundColor: ['#e74c3c', '#f39c12', '#3498db', '#2ecc71']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // אתחול גרף קשרים
            var graphContainer = document.getElementById('graph-container');
            
            var graphNodes = new vis.DataSet([
                { id: 1, label: 'module.py', color: { background: '#3572A5' } },
                { id: 2, label: 'file_analyzer.py', color: { background: '#3572A5' } },
                { id: 3, label: 'relationship_graph.py', color: { background: '#3572A5' } },
                { id: 4, label: 'os', color: { background: '#cccccc' } },
                { id: 5, label: 're', color: { background: '#cccccc' } },
                { id: 6, label: 'json', color: { background: '#cccccc' } },
                { id: 7, label: 'logging', color: { background: '#cccccc' } },
                { id: 8, label: 'networkx', color: { background: '#cccccc' } },
                { id: 9, label: 'matplotlib', color: { background: '#cccccc' } }
            ]);
            
            var graphEdges = new vis.DataSet([
                { from: 1, to: 2, arrows: 'to' },
                { from: 1, to: 3, arrows: 'to' },
                { from: 2, to: 4, arrows: 'to' },
                { from: 2, to: 5, arrows: 'to' },
                { from: 2, to: 6, arrows: 'to' },
                { from: 2, to: 7, arrows: 'to' },
                { from: 2, to: 8, arrows: 'to' },
                { from: 3, to: 4, arrows: 'to' },
                { from: 3, to: 6, arrows: 'to' },
                { from: 3, to: 7, arrows: 'to' },
                { from: 3, to: 8, arrows: 'to' },
                { from: 3, to: 9, arrows: 'to' },
                { from: 3, to: 2, arrows: 'to', dashes: true }
            ]);
            
            var graphData = {
                nodes: graphNodes,
                edges: graphEdges
            };
            
            var graphOptions = {
                nodes: {
                    shape: 'dot',
                    size: 16,
                    font: {
                        size: 12
                    },
                    borderWidth: 1,
                    shadow: true
                },
                edges: {
                    width: 1,
                    smooth: {
                        type: 'continuous'
                    }
                },
                physics: {
                    enabled: true,
                    barnesHut: {
                        gravitationalConstant: -2000,
                        centralGravity: 0.1,
                        springLength: 95,
                        springConstant: 0.04,
                        damping: 0.09
                    },
                    stabilization: {
                        iterations: 200
                    }
                },
                interaction: {
                    navigationButtons: true,
                    keyboard: true
                }
            };
            
            var graph = new vis.Network(graphContainer, graphData, graphOptions);
            
            // אירועים והנפשות
            
            // לחיצה על כפתור ניתוח
            document.getElementById('analyze-btn').addEventListener('click', function() {
                // הדגמת אנימציה
                this.innerHTML = '<div class="spinner me-2"></div> מנתח...';
                this.disabled = true;
                
                // סימולציית ניתוח
                setTimeout(function() {
                    document.getElementById('analyze-btn').innerHTML = '<i class="fas fa-search me-1"></i> ניתוח';
                    document.getElementById('analyze-btn').disabled = false;
                    
                    // הצגת תוצאות
                    var resultsPane = document.getElementById('analyzer-tab');
                    resultsPane.scrollIntoView({ behavior: 'smooth' });
                }, 2000);
            });
            
            // לחיצה על כפתור מיזוג
            document.getElementById('merge-btn').addEventListener('click', function() {
                // הדגמת אנימציה
                this.innerHTML = '<div class="spinner me-2"></div> ממזג...';
                this.disabled = true;
                
                // עדכון סטטוס בזמן אמת
                var currentStep = document.getElementById('current-step');
                var progressBar = document.querySelector('.progress-bar');
                var stepTexts = ['ניתוח קבצים', 'זיהוי הבדלים', 'פתרון קונפליקטים', 'יצירת מיזוג'];
                var progress = [25, 50, 75, 100];
                
                var stepIndex = 0;
                var stepInterval = setInterval(function() {
                    if (stepIndex < stepTexts.length) {
                        currentStep.textContent = stepTexts[stepIndex];
                        progressBar.style.width = progress[stepIndex] + '%';
                        progressBar.setAttribute('aria-valuenow', progress[stepIndex]);
                        stepIndex++;
                    } else {
                        clearInterval(stepInterval);
                        document.getElementById('merge-status').textContent = 'הושלם';
                        document.getElementById('merge-status').className = 'status-badge badge-success';
                        document.getElementById('merge-spinner').style.display = 'none';
                        document.getElementById('merge-btn').innerHTML = '<i class="fas fa-object-group me-1"></i> מיזוג קבצים';
                        document.getElementById('merge-btn').disabled = false;
                    }
                }, 1000);
            });
            
            // לחיצה על כפתור סריקה
            document.getElementById('scan-btn').addEventListener('click', function() {
                // הדגמת אנימציה
                this.innerHTML = '<div class="spinner me-2"></div> סורק...';
                this.disabled = true;
                
                // סימולציית סריקה
                setTimeout(function() {
                    document.getElementById('scan-btn').innerHTML = '<i class="fas fa-search me-1"></i> התחלת סריקה';
                    document.getElementById('scan-btn').disabled = false;
                }, 2000);
            });
            
            // אירועי גרף
            document.getElementById('zoom-in-btn').addEventListener('click', function() {
                graph.zoom(1.2);
            });
            
            document.getElementById('zoom-out-btn').addEventListener('click', function() {
                graph.zoom(0.8);
            });
            
            document.getElementById('fit-btn').addEventListener('click', function() {
                graph.fit();
            });
            
            // אירוע בחירת קודקוד בגרף
            graph.on('selectNode', function(params) {
                document.getElementById('selected-node-info-card').style.display = 'block';
                document.getElementById('selected-node-name').textContent = graphNodes.get(params.nodes[0]).label;
            });
            
            // סגירת פאנל מידע על קודקוד
            document.getElementById('close-node-info').addEventListener('click', function() {
                document.getElementById('selected-node-info-card').style.display = 'none';
            });
            
            // לחיצה על כפתורי שמירת הגדרות
            document.getElementById('save-settings-btn').addEventListener('click', function() {
                this.innerHTML = '<div class="spinner me-2"></div> שומר...';
                this.disabled = true;
                
                setTimeout(function() {
                    document.getElementById('save-settings-btn').innerHTML = '<i class="fas fa-check me-1"></i> נשמר!';
                    
                    setTimeout(function() {
                        document.getElementById('save-settings-btn').innerHTML = '<i class="fas fa-save me-1"></i> שמירת הגדרות';
                        document.getElementById('save-settings-btn').disabled = false;
                    }, 1500);
                }, 1000);
            });
            
            document.getElementById('save-analysis-settings-btn').addEventListener('click', function() {
                this.innerHTML = '<div class="spinner me-2"></div> שומר...';
                this.disabled = true;
                
                setTimeout(function() {
                    document.getElementById('save-analysis-settings-btn').innerHTML = '<i class="fas fa-check me-1"></i> נשמר!';
                    
                    setTimeout(function() {
                        document.getElementById('save-analysis-settings-btn').innerHTML = '<i class="fas fa-save me-1"></i> שמירת הגדרות';
                        document.getElementById('save-analysis-settings-btn').disabled = false;
                    }, 1500);
                }, 1000);
            });
            
            // הרשמה למערכת PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
                    console.log('Service Worker נרשם בהצלחה:', registration.scope);
                }).catch(function(error) {
                    console.log('רישום Service Worker נכשל:', error);
                });
            }
        });
    </script>
</body>
</html>
